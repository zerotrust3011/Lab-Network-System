Sw VTP Server

ena
conf t
host VTPSERVER
vtp mode server
vtp domain admin
vtp pass admin
vtp verson 2
int range f0/1-5
sw mode trunk
ex
vlan 30
ex
vlan 21
ex
vlan 22
ex
vlan 23
ex
vlan 24
ex
vlan 11
ex
vlan 12
ex
vlan 13
ex
vlan 14
ex
vlan 10
ex



Sw sw5

ena
conf t
host sw5
vtp mode cl
vtp domain admin
vtp pass admin
int range f0/1-2
sw mode trunk
int range f0/3-4
sw mode acc
sw acc vlan 30
ex


Sw sw1
ena
conf t
host sw1
vtp mode cl
vtp domain admin
vtp pass admin
int range f0/1-2
sw mode trunk
ex
int range f0/3-4
sw mode acc
sw acc vlan 11
ex
int range f0/5-6
sw mode acc
sw acc vlan 12
ex

Sw sw2


ena
conf t
host sw2
vtp mode cl
vtp domain admin
vtp pass admin
int range f0/1-2
sw mode trunk
ex
int range f0/3-4
sw mode trunk
ex
int f0/5
sw mode acc
sw acc vlan 13
ex
int f0/8
sw mode acc
sw acc vlan 13
ex
int range f0/6-7
sw mode acc
sw acc vlan 14
ex
int f0/9
sw mode acc
sw acc vlan 10
ex


Sw sw3
ena
conf t
host sw3
vtp mode cl
vtp domain admin
vtp pass admin

int range f0/1-2
sw mode trunk
ex
int range f0/3,f0/5
sw mode acc
sw acc vlan 21
ex
int range f0/4,f0/6
sw mode acc
sw acc vlan 22
ex


Sw sw4


ena
conf t
host sw4
vtp mode cl
vtp domain admin
vtp pass admin
int range f0/1-2
sw mode trunk
ex
int range f0/3-4
sw mode trunk
ex
int range f0/5,f0/8
sw mode acc
sw acc vlan 23
ex
int range f0/6-7
sw mode acc
sw acc vlan 24
ex
int f0/9
sw mode acc
sw acc vlan 20
ex



local router

routing vlan

ena
conf t
host Localrouter
int g0/0
no shut
ex
int g0/0.30
en dot 30
ip add 192.168.30.1 255.255.255.0
ex
int g0/0.10
en dot 10
ip add 192.168.10.1 255.255.255.0
ex
int g0/0.11
en dot 11
ip add 192.168.11.1 255.255.255.0
ex
int g0/0.12
en dot 12
ip add 192.168.12.1 255.255.255.0
ex
int g0/0.13
en dot 13
ip add 192.168.13.1 255.255.255.0
ex
int g0/0.14
en dot 14
ip add 192.168.14.1 255.255.255.0
ex
int g0/0.20
en dot 20
ip add 192.168.20.1 255.255.255.0
ex
int g0/0.21
en dot 21
ip add 192.168.21.1 255.255.255.0
ex
int g0/0.22
en dot 22
ip add 192.168.22.1 255.255.255.0
ex
int g0/0.23
en dot 23
ip add 192.168.23.1 255.255.255.0
ex
int g0/0.24
en dot 24
ip add 192.168.24.1 255.255.255.0
ex

DHCP vlan

ip dhcp ex 192.168.10.1 192.168.10.10
ip dhcp pool vlan10
net 192.168.10.0 255.255.255.0
def	192.168.10.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.11.1 192.168.11.10
ip dhcp pool vlan11
net 192.168.11.0 255.255.255.0
def	192.168.11.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.12.1 192.168.12.10
ip dhcp pool vlan12
net 192.168.12.0 255.255.255.0
def	192.168.12.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.13.1 192.168.13.10
ip dhcp pool vlan13
net 192.168.13.0 255.255.255.0
def	192.168.13.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.14.1 192.168.14.10
ip dhcp pool vlan14
net 192.168.14.0 255.255.255.0
def	192.168.14.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.20.1 192.168.20.10
ip dhcp pool vlan20
net 192.168.20.0 255.255.255.0
def	192.168.20.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.21.1 192.168.21.10
ip dhcp pool vlan21
net 192.168.21.0 255.255.255.0
def	192.168.21.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.22.1 192.168.22.10
ip dhcp pool vlan22
net 192.168.22.0 255.255.255.0
def	192.168.22.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.23.1 192.168.23.10
ip dhcp pool vlan23
net 192.168.23.0 255.255.255.0
def	192.168.23.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.24.1 192.168.24.10
ip dhcp pool vlan24
net 192.168.24.0 255.255.255.0
def	192.168.24.1
dns 192.168.30.2
ex
ip dhcp ex 192.168.30.1
ip dhcp pool vlan30
net 192.168.30.0 255.255.255.0
def	192.168.30.1
ex

NAT IN OUT

int g0/0.10
ip nat in
ex
int g0/0.11
ip nat in
ex
int g0/0.12
ip nat in
ex
int g0/0.13
ip nat in
ex
int g0/0.14
ip nat in
ex
int g0/0.20
ip nat in
ex
int g0/0.21
ip nat in
ex
int g0/0.22
ip nat in
ex
int g0/0.23
ip nat in
ex
int g0/0.24
ip nat in
ex
int g0/0.30
ip nat in
ex
int g0/1
ip nat out
ex
ip route 0.0.0.0 0.0.0.0 196.169.1.2


Router ISP

ena
conf t
host ISP
int g0/0
no shut
ip add 196.169.1.2 255.255.255.0
ex
int g0/1
no shut
ip add 167.0.0.1 255.255.255.0
ex
int g0/1
no shut
ip add 168.0.0.1 255.255.255.0
ex
router ospf 1
net 168.0.0.0 0.0.0.255 area 0
net 167.0.0.0 0.0.0.255 area 0
redis sta sub
ex

Router R1

ena
conf t
host R1
int g0/0
no shut
ip add 167.0.0.2 255.255.255.0
ex
int g0/1
no shut
ip add 169.0.0.1 255.255.255.0
ex
int g0/1
no shut
ip add 168.0.0.1 255.255.255.0
ex
router ospf 1
net 168.0.0.0 0.0.0.255 area 0
net 167.0.0.0 0.0.0.255 area 0
redis sta sub
